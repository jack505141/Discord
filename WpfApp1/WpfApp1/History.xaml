<Window x:Class="WpfApp1.History"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfApp1"
        mc:Ignorable="d"
        Title="歷史更新紀錄" Height="1000" Width="800">
    <Grid Background="#F9F9F9">
        <Border Margin="20" Padding="20" Background="White" CornerRadius="10" BorderBrush="#DDD" BorderThickness="1">
            <DockPanel>
                <!-- Header -->
                <TextBlock Text="🕒 歷史更新紀錄"
                           DockPanel.Dock="Top"
                           FontSize="22"
                           FontWeight="Bold"
                           Foreground="#3F51B5"
                           Margin="0,0,0,20"/>

                <!-- Main Content -->
                <StackPanel>
                    <!-- 搜尋列和功能按鈕 -->
                    <WrapPanel Margin="0,0,0,10" ItemHeight="30" ItemWidth="Auto">
                       

                        <Button Content="📤 匯出 JSON" Width="120" Height="30" Click="ExportJson_Click" Margin="0,0,10,0"/>
                        <Button Content="🗑️ 刪除紀錄" Width="120" Height="30" Click="DeleteLog_Click"/>
                    </WrapPanel>

                    <!-- 新增：關鍵字輸入框 (按 Enter 查詢) -->
                    <WrapPanel Margin="0,0,0,10" VerticalAlignment="Center">
                        <TextBlock Text="查詢關鍵字:" VerticalAlignment="Center" Margin="0,0,10,0" FontSize="14"/>
                        <TextBox x:Name="KeywordSearchBox"
             Width="400"
             Height="30"
             FontSize="14"
             VerticalContentAlignment="Center"
             KeyDown="KeywordSearchBox_KeyDown"
             Tag="輸入關鍵字後按 Enter 進行查詢"/>
                    </WrapPanel>


                    <!-- 檔案選擇 -->
                    <ComboBox x:Name="LogSelector"
          Width="400"
          Height="35"
          FontSize="14"
          VerticalContentAlignment="Center"
          HorizontalContentAlignment="Left"
          HorizontalAlignment="Left"
          SelectionChanged="LogSelector_SelectionChanged"/>

                    <!-- 更新摘要 -->
                    <TextBlock x:Name="SummaryText"
                               Margin="0,0,0,10"
                               FontSize="13"
                               Foreground="Gray"/>

                    <!-- 紀錄內容顯示 -->
                    <TextBox x:Name="LogContentBox"
                             Height="300"
                             Margin="0,0,0,10"
                             FontFamily="Consolas"
                             FontSize="13"
                             TextWrapping="Wrap"
                             VerticalScrollBarVisibility="Auto"
                             IsReadOnly="True"
                             Background="#FCFCFC"/>

                    <!-- 回主畫面按鈕 -->
                    <Button Content="⬅ 回主畫面"
                            Width="120"
                            Height="35"
                            HorizontalAlignment="Left"
                            Click="GoBack_Click"
                            Background="#2196F3"
                            Foreground="White"
                            FontWeight="SemiBold"
                            BorderBrush="Transparent"
                            Cursor="Hand"/>
                </StackPanel>
            </DockPanel>
        </Border>
    </Grid>
</Window>
