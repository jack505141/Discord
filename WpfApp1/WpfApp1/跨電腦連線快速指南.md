# ?? 跨電腦連線快速參考指南

## ?? 重要修改

**? 已修改：客戶端輸入框不再預設 127.0.0.1**
- 現在是空白的，需要手動輸入伺服器IP
- 添加了兩個快速按鈕幫助您設定

---

## ?? 三種連線模式

### 1?? 同機測試（同一台電腦）

**按鈕**：點擊「同機測試 (本機)」橙色按鈕

**效果**：
- 自動填入 `127.0.0.1`
- 適合在同一台電腦開啟多個視窗測試

**使用時機**：
- 測試功能
- 開發除錯
- 展示多視窗同步

---

### 2?? 跨機連線 - 本機當伺服器（推薦）

**按鈕**：點擊「跨機連線 (本機IP)」綠色按鈕

**效果**：
- 自動填入本機的實際IP（例如：192.168.1.100）
- 適合其他電腦連線到您這台電腦

**使用情境**：
```
您的電腦（伺服器）        其他電腦（客戶端）
┌─────────────────┐      ┌─────────────────┐
│ 1. 啟動伺服器    │      │ 1. 點「開啟連線管理」│
│ 2. 記下IP        │──IP──│ 2. 輸入您的IP    │
│    192.168.1.100 │      │    192.168.1.100 │
│                  │      │ 3. 點「連線」     │
└─────────────────┘      └─────────────────┘
```

---

### 3?? 跨機連線 - 連到其他電腦

**操作**：手動輸入對方的IP位址

**步驟**：
1. **對方電腦**：
   - 啟動伺服器
   - 告訴您他的IP（例如：192.168.1.50）

2. **您的電腦**：
   - 在伺服器位址輸入：`192.168.1.50`
   - 點擊「連線」

---

## ?? UI 改進說明

### 新增功能

1. **輸入框 Placeholder**
   - 空白時顯示提示：「輸入伺服器IP，例如：192.168.1.100」
   - 點擊輸入框後提示會消失

2. **伺服器IP強調顯示**
   - 啟動伺服器後，會特別標注本機IP
   - 格式：`本機IP: 192.168.1.100 ← 其他電腦請用此IP連線`

3. **橙色提示訊息**
   - 在客戶端連線區域上方
   - 提醒：「跨電腦連線：請輸入伺服器的實際IP位址（不是 127.0.0.1）」

4. **改進的錯誤訊息**
   - 連線失敗時會顯示檢查清單
   - 告訴您可能的問題和解決方法

---

## ?? 完整操作流程

### 伺服器端（當主機）

```
步驟 1: 開啟程式
    ↓
步驟 2: 點「開啟連線管理」
    ↓
步驟 3: 點「啟動伺服器」
    ↓
步驟 4: 記下本機IP（會自動顯示）
    例如：192.168.1.100
    ↓
步驟 5: 告訴其他電腦您的IP
    ↓
步驟 6: 關閉 MultiConnect 視窗（連線保持）
    ↓
步驟 7: 回主視窗操作，所有客戶端會同步
```

### 客戶端（連線到主機）

```
步驟 1: 開啟程式
    ↓
步驟 2: 點「開啟連線管理」
    ↓
步驟 3: 選擇連線模式
    
    A) 同機測試 → 點「同機測試 (本機)」
    B) 連到本機 → 點「跨機連線 (本機IP)」  
    C) 連到其他電腦 → 手動輸入對方IP
    ↓
步驟 4: 點「連線」
    ↓
步驟 5: 看到「已連線」?
    ↓
步驟 6: 關閉 MultiConnect 視窗（連線保持）
    ↓
步驟 7: 等待接收伺服器的同步操作
```

---

## ?? 常見錯誤處理

### ? 錯誤 1：還是使用 127.0.0.1

**症狀**：輸入框顯示 `127.0.0.1`

**原因**：點了「同機測試」按鈕

**解決**：
- 如果要跨電腦，改點「跨機連線 (本機IP)」
- 或手動輸入對方的IP

---

### ? 錯誤 2：不知道對方的IP

**解決方法 A**（在對方電腦操作）：
1. 開啟 MultiConnect 視窗
2. 啟動伺服器
3. 查看「本機IP: xxx.xxx.xxx.xxx」

**解決方法 B**（在對方電腦操作）：
```cmd
Win + R → 輸入 cmd → 輸入 ipconfig
找「IPv4 位址」
```

---

### ? 錯誤 3：連線失敗

**檢查清單**：

? **伺服器端**
- [ ] 伺服器已啟動（顯示「運行中」）
- [ ] 記下正確的IP位址
- [ ] 防火牆已允許（第一次會跳出詢問）

? **客戶端**
- [ ] 輸入的IP正確（不是 127.0.0.1）
- [ ] 埠號正確（預設 5000）
- [ ] 兩台電腦在同一網路

? **測試連線**
在客戶端電腦執行：
```powershell
Test-NetConnection -ComputerName 192.168.1.100 -Port 5000
```
顯示 `TcpTestSucceeded : True` 表示可以連線

---

## ?? 實用技巧

### 技巧 1：快速複製IP

1. 伺服器啟動後，本機IP會顯示在兩個地方：
   - 伺服器設定區：`本機IP: xxx.xxx.xxx.xxx`
   - 日誌區：`[i] ?? 本機IP: xxx.xxx.xxx.xxx`

2. 選取複製，傳給其他人

### 技巧 2：儲存常用IP

如果經常連線到同一台電腦：
1. 記錄對方的IP（例如：192.168.1.100）
2. 下次直接輸入，不用問

### 技巧 3：同時連多台

一台伺服器可以同時連接多個客戶端：
```
伺服器
  ├─ 客戶端 1 (192.168.1.101)
  ├─ 客戶端 2 (192.168.1.102)
  ├─ 客戶端 3 (192.168.1.103)
  └─ 客戶端 4 (192.168.1.104)
```

### 技巧 4：檢查連線狀態

**在主視窗**查看頂部的連線狀態：
- ?? 伺服器運行中 (3 個客戶端) ← 顯示連線數量
- ?? 已連線到伺服器

---

## ?? 最佳實踐

### ? DO（推薦做法）

1. **伺服器端**：
   - 啟動伺服器後，立即記下IP
   - 確認防火牆允許連線
   - 保持主程式運行（可以關閉 MultiConnect 視窗）

2. **客戶端**：
   - 使用「跨機連線」按鈕快速設定
   - 連線前先確認能 ping 通伺服器
   - 連線成功後可以關閉 MultiConnect 視窗

3. **測試流程**：
   - 先在本機測試功能正常
   - 再進行跨電腦連線
   - 最後測試操作同步

### ? DON'T（避免的錯誤）

1. ? 跨電腦時使用 127.0.0.1
2. ? 不確認防火牆就連線
3. ? 伺服器關閉主程式（會中斷連線）
4. ? 兩台電腦不在同一網路

---

## ?? 需要協助？

如果遇到問題，請檢查：

1. **日誌訊息**（MultiConnect 視窗下方）
   - 查看詳細的錯誤訊息
   - 所有操作都有記錄

2. **主視窗狀態**（頂部連線狀態）
   - 確認連線是否正常
   - 查看客戶端數量

3. **測試網路連線**
   ```powershell
   # 測試能否連到伺服器
   Test-NetConnection -ComputerName 192.168.1.100 -Port 5000
   
   # 查看本機IP
   ipconfig
   ```

---

## ?? 現在開始使用

**快速開始 3 步驟**：

1. ?? **點「跨機連線 (本機IP)」**（綠色按鈕）
2. ?? **點「連線」**（藍色按鈕）
3. ? **成功！** 開始同步操作

**記住**：
- ?? 橙色 = 同機測試（127.0.0.1）
- ?? 綠色 = 跨機連線（實際IP）

祝您使用順利！ ??
